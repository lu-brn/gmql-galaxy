<macros>
    <xml name="input_ds" token_label="@LABEL@">
        <param name="input_ds" type="select" label="@LABEL@">
            <options from_dataset="gmql_datasets">
                <column name="value" index="0"/>
            </options>
        </param>
    </xml>
    <xml name="output_var">
        <param name="output_var" type="text" label="Output Variable Name" >
            <expand macro="text_val" />
        </param>
    </xml>
    <xml name="input_var" token_name="@NAME@" token_label="@LABEL@" token_optional="@OPTIONAL@">
        <param name="@NAME@" label="@LABEL@" optional="@OPTIONAL@" type="text" help="Must be a dataset variable already defined as output of a previous operation.">
            <expand macro="text_val" />
        </param>
    </xml>
    <xml name="materialize_stm" >
        <conditional name="m_stm">
            <param name="materialize_stm" type="boolean" label="Materialize the result?" help="This may be helpful to check intermediate datasets" />
            <when value="true">
                    <expand macro="output-filename" />
            </when>
        </conditional>
    </xml>
    <xml name="output-filename">
        <param name="file_name" type="text" label="Name of the file into which the dataset DS will be saved"
               help="The actual GMQL implementation materializes DS into a file with a name in the form [queryname]_[timestamp]_filename">
            <expand macro="text_val"/>
        </param>
    </xml>
    <xml name="block_logCon" >
        <section name="block_logCon" title="Logical concatenation between blocks" expanded="true"
                 help="The following logical connectors applies to the WHOLE following block.">
            <expand macro="logCon" />
            <param name="negate" type="boolean" label="Negative Condition"  />
        </section>
    </xml>
    <xml name="logCon">
        <param name="logCon" type="select" label="Logical Operator">
            <option value="AND">AND</option>
            <option value="OR">OR</option>
        </param>
    </xml>
    <xml name="text_val">
        <validator type="regex" message="Only alphanumeric characters and underscore allowed.">[\w]+$</validator>
    </xml>
</macros>